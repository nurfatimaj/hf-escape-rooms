{
  "hash": "012a282946cf8c678bb590b0b7c0f72a",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat: \n  dashboard:\n    orientation: columns\n\nlisting: \n  id: room-table\n  contents: rooms\n  type: table\n  fields: \n    - date\n    - title\n    - rating\n    - city\n    - country\n    - players\n    - completion-time\n  field-display-names: \n    title: Room\n    rating: Rating\n    city: City\n    country: Country\n    players: Players\n    completion-time: Completion time\n  sort: \n    - date desc\n  sort-ui: [date, title, rating, city, country, completion-time]\n    \nexecute: \n  echo: false\n  warning: false\n  error: false\n---\n\n# Overview\n\n##  {.sidebar}\n\n\n\n```{ojs}\n//| panel: input\n//| classes: bg-white text-dark\n\nviewof year_filter = Inputs.form({\n  beg: Inputs.number([2023, Infinity], {step: 1, label: 'From', placeholder: new Date().getFullYear(), value: 2023}), \n  end: Inputs.number([2023, Infinity], {step: 1, label: 'to', placeholder: new Date().getFullYear(), value: new Date().getFullYear()}), \n}, \n{\n  template: (inputs) => htl.html`<div class=\"row justify-content-between no-gutters\">\n    <div class=\"col\">${inputs.beg}</div>\n    <div class=\"col\">${inputs.end}</div>\n    </div>`\n}); \n\nviewof by_variable = Inputs.select(new Map([['Country', 'country'], ['Rating', 'rating'], ['Year', 'year'], ['Company', 'company'], ['Completion time', 'time_min']]), {value: 'country', label: 'By'});\n```\n\n## Column {width=\"60%\"}\n\n```{ojs}\n//| panel: fill\n\nfiltered = transpose(data).filter(function(d) {\n  return year_filter.beg <= new Date(d.date).getFullYear() && new Date(d.date).getFullYear() <= year_filter.end; \n})\n\nwidth = '100%'; \nheight = '500px'; \n\ngroups = Array.from(new Set(filtered.map(d => d?.[by_variable]))).sort()\ncolors = d3.scaleOrdinal(d3.schemeTableau10).domain(groups)\n\nroomMap = {\n  // You'll often see Leaflet examples initializing a map like L.map('map'),\n  // which tells the library to look for a div with the id 'map' on the page.\n  // In Observable, we instead create a div from scratch in this cell, so it's\n  // completely self-contained.\n  let container = DOM.element('div', { style: `width:${width};height:${height}` });\n  \n  // Note that I'm yielding the container pretty early here: this allows the\n  // div to be placed on the page. This is important, because Leaflet uses\n  // the div's .offsetWidth and .offsetHeight to size the map. If I were\n  // to only return the container at the end of this method, Leaflet might\n  // get the wrong idea about the map's size.\n  yield container;\n  \n  // Now we create a map object and add a layer to it.\n  let map = L.map(container);\n  let osmLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png', {\n      attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n  }).addTo(map);\n  \n  var rooms = L.featureGroup(); \n  for (var i = 0; i < filtered.length; i++) {\n    var c = colors(filtered[i]?.[by_variable]);\n    let room = L.circleMarker([filtered[i].lat, filtered[i].long], {color: c, fillColor:c}); \n    room.bindPopup(filtered[i].linked_name); \n    rooms.addLayer(room);\n  }\n  \n  map.addLayer(rooms); \n  map.fitBounds(rooms.getBounds(), {maxZoom: 7});\n}\n```\n\n## Column {width=\"40%\"}\n\n```{ojs}\n\nPlot.rectY(filtered, \n  Plot.binX(\n    {y: \"count\"}, \n    {x: \"year\", fill: by_variable, thresholds: 'auto'}\n  ))\n  .plot({\n    color: {legend: true},\n    marks: [\n      Plot.frame(),\n    ]\n  }\n)\n```\n\n```{ojs}\nPlot.lineY(filtered, \n    Plot.binX(\n      {y: \"mean\"}, \n      {x: \"year\", y: \"rating\", stroke: by_variable, strokeWidth: 3}\n    )\n  )\n  .plot({\n    color: {legend: true},\n    marks: [\n      Plot.frame(),\n      Plot.dot(filtered, \n      {x: \"year\", y: \"rating\", color: by_variable, fill: by_variable}\n    )\n    ]\n  }\n)\n```\n\n# List\n\n::: {#room-table}\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script type=\"ojs-define\">\n{\"contents\":[{\"name\":\"data\",\"value\":{\"room\":[\"elamysteeri-marien-muotokuvat\",\"getaway-room-finlayson-lights\",\"getaway-room-nasinneula\",\"getaway-room-smugglers\",\"getaway-room-star-of-theatre\",\"great-escape-steam-punk-adventure\",\"ingame-indiana-jones\",\"makeitout-the-extremist\",\"makeitout-the-pirates\",\"room-escape-finlayson-out-of-mars\",\"room-fox-der-letzte-seelenwanderer\",\"room-fox-der-wald\",\"the-escape-game-heist\",\"the-escape-game-mission-mars\",\"the-escape-game-prison-break\",\"the-room-221b-baker-street\"],\"title\":[\"Marien Muotokuvat\",\"Finlaysonin Sähkövalo\",\"Näsinneula\",\"Smugglers\",\"Star of the Theater\",\"Steampunk Adventure\",\"Indiana Jones and the Lost Temple\",\"The Extremist\",\"Return of the Pirates of the Future\",\"Out of Mars\",\"Der letzte Seelenwanderer\",\"Der Wald\",\"The Heist\",\"Mission: Mars\",\"Prison Break\",\"221B Baker Street\"],\"date\":[\"14 Sep 2024\",\"03 Oct 2024\",\"03 Jul 2025\",\"23 May 2024\",\"10 Aug 2025\",\"13 Oct 2024\",\"26 May 2024\",\"06 Feb 2026\",\"06 Feb 2026\",\"11 Jan 2025\",\"13 Aug 2025\",\"19 Oct 2024\",\"20 May 2023\",\"30 Apr 2023\",\"20 May 2023\",\"22 Sep 2024\"],\"long\":[23.7692,23.7758,23.7788,23.7758,23.7548,8.745,24.76,21.6163,21.6163,23.7587,8.6687,8.6687,-93.2401,-93.2401,-93.2401,24.745],\"lat\":[61.4975,61.5001,61.4959,61.5001,61.4947,50.1239,59.4382,63.0974,63.0974,61.5021,50.1067,50.1067,44.8555,44.8555,44.8555,59.4308],\"company\":[\"Elämysteeri\",\"Getaway Room Escape\",\"Getaway Room Escape\",\"Getaway Room Escape\",\"Getaway Room Escape\",\"The Great Escape\",\"iNGAME\",\"Getaway Room Escape\",\"Getaway Room Escape\",\"Room Escape Finlayson\",\"Room Fox\",\"Room Fox\",\"The Escape Game\",\"The Escape Game\",\"The Escape Game\",\"The Room\"],\"country\":[\"Finland\",\"Finland\",\"Finland\",\"Finland\",\"Finland\",\"Germany\",\"Estonia\",\"Finland\",\"Finland\",\"Finland\",\"Germany\",\"Germany\",\"USA\",\"USA\",\"USA\",\"Estonia\"],\"completion-time\":[\"75 min\",\"60 min\",null,\"63 min\",null,\"60 min\",null,\"59 min\",\"32 min\",null,null,null,null,null,null,null],\"rating\":[5,5,2,4,4,1,1,3,4,1,3,4,4,2,3,1],\"path\":[\"rooms/elamysteeri-marien-muotokuvat.qmd\",\"rooms/getaway-room-finlayson-lights.qmd\",\"rooms/getaway-room-nasinneula.qmd\",\"rooms/getaway-room-smugglers.qmd\",\"rooms/getaway-room-star-of-theatre.qmd\",\"rooms/great-escape-steam-punk-adventure.qmd\",\"rooms/ingame-indiana-jones.qmd\",\"rooms/makeitout-the-extremist.qmd\",\"rooms/makeitout-the-pirates.qmd\",\"rooms/room-escape-finlayson-out-of-mars.qmd\",\"rooms/room-fox-der-letzte-seelenwanderer.qmd\",\"rooms/room-fox-der-wald.qmd\",\"rooms/the-escape-game-heist.qmd\",\"rooms/the-escape-game-mission-mars.qmd\",\"rooms/the-escape-game-prison-break.qmd\",\"rooms/the-room-221b-baker-street.qmd\"],\"dt\":[\"2024-09-14 12:00:00\",\"2024-10-03 15:45:00\",\"2025-07-03 18:00:00\",\"2024-05-23 19:30:00\",\"2025-08-10 11:00:00\",\"2024-10-13 11:45:00\",\"2024-05-26 16:15:00\",\"2026-02-06 17:05:00\",\"2026-02-06 16:30:00\",\"2025-01-11 19:15:00\",\"2025-08-13 19:45:00\",\"2024-10-19 10:15:00\",\"2023-05-20 11:20:00\",\"2023-04-30 08:40:00\",\"2023-05-20 13:00:00\",\"2024-09-22 16:45:00\"],\"year\":[2024,2024,2025,2024,2025,2024,2024,2026,2026,2025,2025,2024,2023,2023,2023,2024],\"time_min\":[75,60,null,63,null,60,null,59,32,null,null,null,null,null,null,null],\"linked_name\":[\"<b><a href='rooms/elamysteeri-marien-muotokuvat.qmd' target='_parent'>Marien Muotokuvat<\\/a><\\/b>\",\"<b><a href='rooms/getaway-room-finlayson-lights.qmd' target='_parent'>Finlaysonin Sähkövalo<\\/a><\\/b>\",\"<b><a href='rooms/getaway-room-nasinneula.qmd' target='_parent'>Näsinneula<\\/a><\\/b>\",\"<b><a href='rooms/getaway-room-smugglers.qmd' target='_parent'>Smugglers<\\/a><\\/b>\",\"<b><a href='rooms/getaway-room-star-of-theatre.qmd' target='_parent'>Star of the Theater<\\/a><\\/b>\",\"<b><a href='rooms/great-escape-steam-punk-adventure.qmd' target='_parent'>Steampunk Adventure<\\/a><\\/b>\",\"<b><a href='rooms/ingame-indiana-jones.qmd' target='_parent'>Indiana Jones and the Lost Temple<\\/a><\\/b>\",\"<b><a href='rooms/makeitout-the-extremist.qmd' target='_parent'>The Extremist<\\/a><\\/b>\",\"<b><a href='rooms/makeitout-the-pirates.qmd' target='_parent'>Return of the Pirates of the Future<\\/a><\\/b>\",\"<b><a href='rooms/room-escape-finlayson-out-of-mars.qmd' target='_parent'>Out of Mars<\\/a><\\/b>\",\"<b><a href='rooms/room-fox-der-letzte-seelenwanderer.qmd' target='_parent'>Der letzte Seelenwanderer<\\/a><\\/b>\",\"<b><a href='rooms/room-fox-der-wald.qmd' target='_parent'>Der Wald<\\/a><\\/b>\",\"<b><a href='rooms/the-escape-game-heist.qmd' target='_parent'>The Heist<\\/a><\\/b>\",\"<b><a href='rooms/the-escape-game-mission-mars.qmd' target='_parent'>Mission: Mars<\\/a><\\/b>\",\"<b><a href='rooms/the-escape-game-prison-break.qmd' target='_parent'>Prison Break<\\/a><\\/b>\",\"<b><a href='rooms/the-room-221b-baker-street.qmd' target='_parent'>221B Baker Street<\\/a><\\/b>\"]}}]}\n</script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}